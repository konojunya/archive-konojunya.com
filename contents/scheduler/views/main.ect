<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,user-scalable=no"><title>Schedues</title><link rel="stylesheet" href="stylesheets/lib/sanitize.min.css"><link rel="stylesheet" href="stylesheets/lib/font-awesome.min.css"><link rel="stylesheet" href="stylesheets/lib/bootstrap.min.css"><link rel="stylesheet" href="stylesheets/src/style.css"></head><body><h1>Hello <%= @id %>!</h1><p id="view_clock"></p><ul class="content"><li class="next"></li><li class="subj"></li><li class="room"></li></ul><div class="schedules-table"><div class="container-fluid" style="padding: 0 2%;"><div class="table-responsive"><table class="table table-bordered"><thead><tr><th></th><th>月</th><th>火</th><th>水</th><th>木</th><th>金</th></tr></thead><tbody><tr><th>1限</th><td class="g1" id="月曜１限目"></td><td class="k1" id="火曜１限目"></td><td class="s1" id="水曜１限目"></td><td class="m1" id="木曜１限目"></td><td class="f1" id="金曜１限目"></td></tr><tr><th>2限</th><td class="g2" id="月曜２限目"></td><td class="k2" id="火曜２限目"></td><td class="s2" id="水曜２限目"></td><td class="m2" id="木曜２限目"></td><td class="f2" id="金曜２限目"></td></tr><tr><th>3限</th><td class="g3" id="月曜３限目"></td><td class="k3" id="火曜３限目"></td><td class="s3" id="水曜３限目"></td><td class="m3" id="木曜３限目"></td><td class="f3" id="金曜３限目"></td></tr><tr><th>4限</th><td class="g4" id="月曜４限目"></td><td class="k4" id="火曜４限目"></td><td class="s4" id="水曜４限目"></td><td class="m4" id="木曜４限目"></td><td class="f4" id="金曜４限目"></td></tr><tr><th>5限</th><td class="g5" id="月曜５限目"></td><td class="k5" id="火曜５限目"></td><td class="s5" id="水曜５限目"></td><td class="m5" id="木曜５限目"></td><td class="f5" id="金曜５限目"></td></tr></tbody></table></div></div></div><script src="javascripts/lib/jquery.min.js"></script><script src="javascripts/lib/bootstrap.min.js"></script><script>(function($){var d,day,hour,min,sec;var g = JSON.parse('<%- JSON.stringify(@g) %>');var k = JSON.parse('<%- JSON.stringify(@k) %>');var s = JSON.parse('<%- JSON.stringify(@s) %>');var m = JSON.parse('<%- JSON.stringify(@m) %>');var f = JSON.parse('<%- JSON.stringify(@f) %>');var dayNames = "xgksmfd";for(var i = 1; i < 6; i++){$(".g"+i).text(g[i-1].subject);$(".k"+i).text(k[i-1].subject);$(".s"+i).text(s[i-1].subject);$(".m"+i).text(m[i-1].subject);$(".f"+i).text(f[i-1].subject);}function checkSchedules(){var time = hour+""+min;var today = getToday(dayNames[day]);if(time < 900){$(".next").text("1限目は");if(today[0].subject != ""){renderHTML(today[0].subject,today[0].roomNum);}else{$(".subj").html("何もありません。");}}else if(time < 1045){$(".next").text("2限目は");$(".table td").removeClass("active");$("."+dayNames[day]+"1").addClass("active");if(today[1].subject != ""){renderHTML(today[1].subject,today[1].roomNum);}else{$(".subj").html("何もありません。");}}else if(time < 1305){$(".next").text("3限目は");$(".table td").removeClass("active");$("."+dayNames[day]+"2").addClass("active");if(today[2].subject != ""){renderHTML(today[2].subject,today[2].roomNum);}else{$(".subj").html("何もありません。");}}else if(time < 1450){$(".next").text("4限目は");$(".table td").removeClass("active");$("."+dayNames[day]+"3").addClass("active");if(today[3].subject != ""){renderHTML(today[3].subject,today[3].roomNum);}else{$(".subj").html("何もありません。");}}else if(time < 1630){$(".next").text("5限目は");$(".table td").removeClass("active");$("."+dayNames[day]+"4").addClass("active");today = getToday(dayNames[day]);if(today[4].subject != ""){renderHTML(today[4].subject,today[4].roomNum);}else{$(".table td").removeClass("active");$("."+dayNames[day]+"5").addClass("active");$(".subj").html("何もありません。");}}else{$(".subj").text("お疲れさまでした！！");}}function renderHTML(sub,room){$(".subj").text(sub);$(".room").text(room+"教室です。");}function getToday(argv_day){switch(argv_day){case "g":return g;break;case "k":return k;break;case "s":return s;break;case "m":return m;break;case "f":return f;break;default:console.log("Error");}}function toDoubleDigits(num) {num += "";if (num.length === 1){num = "0" + num;}return num;};setInterval(function(){d = new Date();day = d.getDay();hour = toDoubleDigits(d.getHours());min = toDoubleDigits(d.getMinutes());sec = toDoubleDigits(d.getSeconds());$("#view_clock").text(hour + ":" + min + ":" + sec);checkSchedules();},500);})(jQuery);</script></body></html>