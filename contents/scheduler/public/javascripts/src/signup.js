(function($){function htmlEscape(text) {text = $("<div>").text(text).html();return text.toUpperCase();}function hasError(){$(".errorInput").show();setTimeout(function(){$(".errorInput").fadeOut();},4000);}var sim,data = {g:[],k:[],s:[],m:[],f:[]};for(var i = 0; i < 5; i++){data.g[i] = {wday: null,subject: null,roomNum: null};data.k[i] = {wday: null,subject: null,roomNum: null};data.s[i] = {wday: null,subject: null,roomNum: null};data.m[i] = {wday: null,subject: null,roomNum: null};data.f[i] = {wday: null,subject: null,roomNum: null};}$(".add").on("click",function(){var subj = $(".inputText").val();var roomNum = $(".inputNum").val();if(subj == "" || roomNum == ""){hasError();return;}subj = htmlEscape(subj);$("."+sim).text(subj);$(".inputText,.inputNum").val("");console.log(sim[0]);switch (sim[0]){case "g":data.g[sim[1]-1] = {wday: sim,subject: subj,roomNum: roomNum};break;case "k":data.k[sim[1]-1] = {wday: sim,subject: subj,roomNum: roomNum};break;case "s":data.s[sim[1]-1] = {wday: sim,subject: subj,roomNum: roomNum};break;case "m":data.m[sim[1]-1] = {wday: sim,subject: subj,roomNum: roomNum};break;case "f":data.f[sim[1]-1] = {wday: sim,subject: subj,roomNum: roomNum};break;default:console.log("Error");break;}console.log(data);});$(".table td").on("touchend",function(){$(".inputSchedule").removeClass("hidden");sim = $(this).attr("class");console.log(sim);$(".inputSchedule").removeClass("hidden");var name = $(this).attr("id");$(".days").text(name);});$(".end").on("click",function(){if(window.confirm('データを送信し、登録を完了します。')){var id = $(this).attr("name");$.ajax({type: "POST",url: "/addSchedules",data: {data: data,id: id},success: function(){location.href = "/";}});}});})(jQuery);